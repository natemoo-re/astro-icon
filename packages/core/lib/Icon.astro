---
import load from './utils.ts';
export { Props } from './Props.ts';

let { name, pack, title, optimize = true, class: className, ...inputProps } = Astro.props;
if (pack) {
    name = `${pack}:${name}`;
}

let innerHTML = '';
let props = {};
try {
    const svg = await load(name, { ...inputProps, class: className }, optimize);
    innerHTML = svg.innerHTML;
    props = svg.props;
} catch (e) {
    console.error(e);
}
---

<svg {...props} astro-icon={name}>{title ? (<title>{title}</title>) : ''}{innerHTML}</svg>
